{"ast":null,"code":"import _slicedToArray from\"C:/Users/HP/Desktop/IT School/Projects/ItSchool News/Itschool-news/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useContext,useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import Layout from\"../components/Layout\";import Container from\"react-bootstrap/Container\";import Row from\"react-bootstrap/Row\";import Col from\"react-bootstrap/Col\";import{useFetch}from\"../utils/hooks/useFetch\";import{getNewsDetailsEndpoint}from\"../api/endpoints\";import{getNewsDetails}from\"../api/adaptors\";import Button from\"react-bootstrap/Button\";import styles from\"./NewsDetails.module.css\";import{getFormattedDate}from\"../utils/date\";import{addToFavorites}from\"../store/Favorites/actions\";import{FavoritesContext}from\"../store/Favorites/context\";// Importam componenta Alert.\nimport Alert from\"react-bootstrap/Alert\";// Importam hook-ul useLocalStorageState.\nimport{useLocalStorage}from\"../utils/hooks/useLocalStorage\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function NewsDetails(){var _useContext=useContext(FavoritesContext),favoritesDispatch=_useContext.favoritesDispatch,favoritesState=_useContext.favoritesState;var _useParams=useParams(),newsId=_useParams.newsId;var newsDetailsEndpoint=getNewsDetailsEndpoint(newsId);var newsDetails=useFetch(newsDetailsEndpoint);var adaptedNewsDetails=getNewsDetails(newsDetails);// Adaugam un state pentru afisarea alertei.\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAlertDisplayed=_useState2[0],setIsAlertDisplayed=_useState2[1];// Extragem functia de modificare a localStorage-ului. Nu avem nevoie de state-ul din localStorage, conventia este ca pentru variabile neutilizate sa punem denumirea _.\n// Comentariul eslint-disable-next-line dezactiveaza eslint pentru urmatoarea linie (sa nu se planga ca nu utilizam variabila _).\n// eslint-disable-next-line\nvar _useLocalStorage=useLocalStorage(\"favorites\",favoritesState),_useLocalStorage2=_slicedToArray(_useLocalStorage,2),_=_useLocalStorage2[0],setLocalStorageState=_useLocalStorage2[1];// Adaugarea in localStorage este un efect, atunci cand se modifica produsele favorite.\n// Cum strim ca s-au modificat produsele favorite? Primim o noua valoare a lui favoritesState.\n// setLocalStorageState este sugerat sa fie adaugat la dependente de o regula de lining.\nuseEffect(function(){setLocalStorageState(favoritesState);},[favoritesState,setLocalStorageState]);var title=adaptedNewsDetails.title,description=adaptedNewsDetails.description,image=adaptedNewsDetails.image,date=adaptedNewsDetails.date,author=adaptedNewsDetails.author,content=adaptedNewsDetails.content,thumbnail=adaptedNewsDetails.thumbnail;var formattedDate=getFormattedDate(date);function handleAddToFavorites(product){var actionResult=addToFavorites(product);favoritesDispatch(actionResult);// Afisam alerta.\nsetIsAlertDisplayed(true);// Imediat ce afisam alerta, declansam un timer, care in 2 secunde va ascunde alerta.\nsetTimeout(function(){setIsAlertDisplayed(false);},2000);}return/*#__PURE__*/_jsxs(Layout,{children:[isAlertDisplayed&&/*#__PURE__*/_jsx(Alert,{variant:\"success\",id:styles.alert,children:\"Succes! Po\\u021Bi vedea \\u0219tirea acces\\xE2nd sec\\u021Biunea Favorite.\"}),/*#__PURE__*/_jsx(Container,{className:\"\".concat(styles.newsDetails,\" my-5\"),children:/*#__PURE__*/_jsx(Row,{className:\"d-flex justify-content-center\",children:/*#__PURE__*/_jsxs(Col,{xs:12,lg:8,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"pt-3 mb-5\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"fw-bold\",children:description}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:image},className:\"mb-4\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fw-bold\",children:[/*#__PURE__*/_jsx(\"p\",{children:author}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-0\",children:formattedDate})]}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){handleAddToFavorites({id:newsId,thumbnail:thumbnail,title:title,description:description,hasCloseButton:true});},children:\"Adaug\\u0103 la favorite\"})]}),/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:content}})]})})})]});}export default NewsDetails;","map":{"version":3,"sources":["C:/Users/HP/Desktop/IT School/Projects/ItSchool News/Itschool-news/src/pages/NewsDetails.jsx"],"names":["useContext","useState","useEffect","useParams","Layout","Container","Row","Col","useFetch","getNewsDetailsEndpoint","getNewsDetails","Button","styles","getFormattedDate","addToFavorites","FavoritesContext","Alert","useLocalStorage","NewsDetails","favoritesDispatch","favoritesState","newsId","newsDetailsEndpoint","newsDetails","adaptedNewsDetails","isAlertDisplayed","setIsAlertDisplayed","_","setLocalStorageState","title","description","image","date","author","content","thumbnail","formattedDate","handleAddToFavorites","product","actionResult","setTimeout","alert","__html","id","hasCloseButton"],"mappings":"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","sourcesContent":["import { useContext, useState, useEffect } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport Layout from \"../components/Layout\";\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\nimport { useFetch } from \"../utils/hooks/useFetch\";\r\nimport { getNewsDetailsEndpoint } from \"../api/endpoints\";\r\nimport { getNewsDetails } from \"../api/adaptors\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport styles from \"./NewsDetails.module.css\";\r\nimport { getFormattedDate } from \"../utils/date\";\r\nimport { addToFavorites } from \"../store/Favorites/actions\";\r\nimport { FavoritesContext } from \"../store/Favorites/context\";\r\n// Importam componenta Alert.\r\nimport Alert from \"react-bootstrap/Alert\";\r\n// Importam hook-ul useLocalStorageState.\r\nimport { useLocalStorage } from \"../utils/hooks/useLocalStorage\";\r\n\r\nfunction NewsDetails() {\r\n  const { favoritesDispatch, favoritesState } = useContext(FavoritesContext);\r\n  const { newsId } = useParams();\r\n  const newsDetailsEndpoint = getNewsDetailsEndpoint(newsId);\r\n  const newsDetails = useFetch(newsDetailsEndpoint);\r\n  const adaptedNewsDetails = getNewsDetails(newsDetails);\r\n  // Adaugam un state pentru afisarea alertei.\r\n  const [isAlertDisplayed, setIsAlertDisplayed] = useState(false);\r\n  // Extragem functia de modificare a localStorage-ului. Nu avem nevoie de state-ul din localStorage, conventia este ca pentru variabile neutilizate sa punem denumirea _.\r\n  // Comentariul eslint-disable-next-line dezactiveaza eslint pentru urmatoarea linie (sa nu se planga ca nu utilizam variabila _).\r\n  // eslint-disable-next-line\r\n  const [_, setLocalStorageState] = useLocalStorage(\r\n    \"favorites\",\r\n    favoritesState\r\n  );\r\n  // Adaugarea in localStorage este un efect, atunci cand se modifica produsele favorite.\r\n  // Cum strim ca s-au modificat produsele favorite? Primim o noua valoare a lui favoritesState.\r\n  // setLocalStorageState este sugerat sa fie adaugat la dependente de o regula de lining.\r\n  useEffect(() => {\r\n    setLocalStorageState(favoritesState);\r\n  }, [favoritesState, setLocalStorageState]);\r\n\r\n  const { title, description, image, date, author, content, thumbnail } =\r\n    adaptedNewsDetails;\r\n  const formattedDate = getFormattedDate(date);\r\n\r\n  function handleAddToFavorites(product) {\r\n    const actionResult = addToFavorites(product);\r\n    favoritesDispatch(actionResult);\r\n    // Afisam alerta.\r\n    setIsAlertDisplayed(true);\r\n    // Imediat ce afisam alerta, declansam un timer, care in 2 secunde va ascunde alerta.\r\n    setTimeout(() => {\r\n      setIsAlertDisplayed(false);\r\n    }, 2000);\r\n  }\r\n\r\n  return (\r\n    <Layout>\r\n      {/* Afisam conditionat alerta */}\r\n      {isAlertDisplayed && (\r\n        <Alert variant=\"success\" id={styles.alert}>\r\n          Succes! Poți vedea știrea accesând secțiunea Favorite.\r\n        </Alert>\r\n      )}\r\n      <Container className={`${styles.newsDetails} my-5`}>\r\n        <Row className=\"d-flex justify-content-center\">\r\n          <Col xs={12} lg={8}>\r\n            <h1 className=\"pt-3 mb-5\">{title}</h1>\r\n            <p className=\"fw-bold\">{description}</p>\r\n            <div\r\n              dangerouslySetInnerHTML={{ __html: image }}\r\n              className=\"mb-4\"\r\n            ></div>\r\n            <div className=\"d-flex justify-content-between align-items-center mb-4\">\r\n              <div className=\"fw-bold\">\r\n                <p>{author}</p>\r\n                <p className=\"mb-0\">{formattedDate}</p>\r\n              </div>\r\n              <Button\r\n                onClick={() => {\r\n                  handleAddToFavorites({\r\n                    id: newsId,\r\n                    thumbnail,\r\n                    title,\r\n                    description,\r\n                    hasCloseButton: true,\r\n                  });\r\n                }}\r\n              >\r\n                Adaugă la favorite\r\n              </Button>\r\n            </div>\r\n            <div dangerouslySetInnerHTML={{ __html: content }}></div>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport default NewsDetails;\r\n"]},"metadata":{},"sourceType":"module"}